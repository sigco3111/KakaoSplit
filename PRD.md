# PRD: Kakao Notion Webapp (Vercel 서버리스)

## 1. 목적
- 카카오톡 CSV 파일을 날짜별로 분류하여, 각 날짜별 파일을 생성
- 지정한 폴더(날짜 또는 output 전체)를 Notion 페이지에 서버리스 방식으로 자동 등록
- 모든 백엔드 로직은 Vercel Serverless Functions로 구현
- 설정값(토큰, DB/페이지 ID 등)은 프론트엔드에서 입력받아 로컬스토리지에 저장

## 2. 주요 기능

### 2.1 CSV 업로드 및 날짜별 분류
- 사용자는 웹에서 CSV 파일 업로드
- 프론트엔드가 Vercel 서버리스 API(`/api/upload`)로 파일 전송
- 서버리스 함수에서 CSV 파싱, 날짜별로 파일 생성(스토리지: Vercel File System 또는 외부 S3)
- 폴더 구조 예시:
  ```
  /output/
    ├── 2025-09-04/chat.txt
    ├── 2025-09-05/chat.txt
    └── ...
  ```

### 2.2 폴더 선택 및 Notion 등록
- 사용자는 날짜 폴더 또는 output 폴더 전체 선택 가능
- 날짜 폴더 지정 시: 해당 날짜만 Notion에 등록(페이지 1개)
- output 폴더 지정 시: 하위 모든 날짜 폴더를 각각 Notion에 등록(여러 페이지)
- 등록은 `/api/notion-register` 서버리스 함수에서 처리

### 2.3 설정화면 및 정보 저장
- Notion API 토큰, DB/페이지 ID 등은 프론트엔드 설정화면에서 입력
- 입력값은 로컬스토리지에 저장, 필요시 수정/초기화 가능

### 2.4 UI/UX
- 파일 업로드, 폴더 선택, 설정 입력 UI
- 진행 상태 및 결과 알림(성공/실패/에러)

## 3. 비기능 요구사항
- Vercel 서버리스 환경에서 동작
- 파일/폴더 관리는 외부 스토리지(S3 등) 활용 권장
- 개인정보 및 인증정보는 로컬스토리지에만 저장

## 4. 기술 스택
- 프론트엔드: React/Next.js (Vercel 배포)
- 백엔드: Vercel Serverless Functions (Node.js)
- 파일 파싱: csv-parser(JS)
- Notion 연동: 공식 Notion API

## 5. 예외 및 에러 처리
- CSV 형식 오류, Notion 등록 실패, 설정 정보 누락 등은 UI에서 안내
- 서버리스 함수 에러는 프론트엔드에서 상세 메시지로 안내

## 6. 향후 확장
- 여러 CSV 동시 처리, 태그/메타데이터 추가, 작업 이력 관리 등

---
이 문서는 Vercel 서버리스 기반 웹앱 개발을 위한 요구사항 정의서입니다.
