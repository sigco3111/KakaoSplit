# KakaoSplit - Product Requirements Document (PRD)

## 1. 제품 개요

### 1.1 제품명
**KakaoSplit** - 카카오톡 대화 분할 도구

### 1.2 제품 목적
카카오톡에서 내보낸 대화 CSV 파일을 날짜별로 자동 분리하여, 사용자가 쉽게 다운로드하고 활용할 수 있도록 하는 웹 애플리케이션

### 1.3 대상 사용자
- 카카오톡 대화 내역을 체계적으로 정리하고 싶은 개인 사용자
- 대화 내역을 날짜별로 분석하거나 보관하고 싶은 사용자
- 대용량 카카오톡 대화 파일을 효율적으로 관리하고 싶은 사용자

## 2. 핵심 기능

### 2.1 CSV 파일 업로드 및 처리
- **입력**: 카카오톡에서 내보낸 CSV 형식의 대화 파일
- **처리**: 날짜별로 메시지 자동 분류
- **출력**: 각 날짜별 개별 마크다운 파일 생성 (예: `chat_2025-01-01.md`)

### 2.2 파일 다운로드
- **ZIP 다운로드**: 모든 처리된 파일을 하나의 ZIP 파일로 압축하여 다운로드
- **개별 다운로드**: 특정 날짜의 파일만 선택하여 개별 다운로드
- **파일 정보**: 각 파일의 크기 및 내용 미리보기

### 2.3 설정 관리
- **저장 경로 설정**: 파일이 저장될 경로 지정 (로컬/클라우드 환경 자동 감지)
- **빠른 경로 설정**: 임시폴더, 바탕화면, 다운로드 폴더 원클릭 설정
- **설정 저장**: 사용자 설정 로컬 스토리지 저장

## 3. 기술 사양

### 3.1 프론트엔드
- **프레임워크**: Next.js 15 (App Router)
- **언어**: TypeScript
- **UI 라이브러리**: Tailwind CSS
- **상태 관리**: React Hooks
- **파일 처리**: JSZip (클라이언트사이드 압축)

### 3.2 백엔드
- **런타임**: Next.js API Routes
- **파일 파싱**: csv-parse
- **환경**: Node.js 서버리스 (Vercel 최적화)

### 3.3 배포
- **플랫폼**: Vercel
- **도메인**: 자동 생성 또는 커스텀 도메인
- **환경 변수**: 없음 (완전 클라이언트 기반)

## 4. 사용자 플로우

### 4.1 기본 사용 플로우
```
1. 웹사이트 접속
   ↓
2. 저장 경로 설정 (선택사항)
   ↓
3. CSV 파일 업로드
   ↓
4. 자동 날짜별 분리 처리
   ↓
5. 파일 목록 확인
   ↓
6. 다운로드 (ZIP 또는 개별)
```

### 4.2 상세 플로우

#### 4.2.1 초기 설정
- 웹사이트 접속 시 기본 저장 경로 자동 설정 (`/tmp/kakao-split-output`)
- 사용자는 원하는 경로로 변경 가능
- 빠른 설정 버튼으로 일반적인 경로 선택 가능

#### 4.2.2 파일 업로드
- CSV 파일만 업로드 가능 (형식 검증)
- 파일 크기 및 내용 자동 검증
- 업로드 진행률 표시

#### 4.2.3 파일 처리
- CSV 파싱 및 날짜 필드 자동 감지
- 날짜별 메시지 그룹핑
- 마크다운 형식으로 변환 (`시간 사용자명: 메시지` 형태)

#### 4.2.4 결과 확인 및 다운로드
- 처리된 파일 목록 표시 (날짜, 크기 정보 포함)
- 전체 ZIP 다운로드 또는 개별 파일 다운로드 선택
- 다운로드 진행률 및 완료 알림

## 5. 데이터 구조

### 5.1 CSV 입력 형식
```csv
Date,Time,User,Message
2025-01-01,09:00,사용자1,안녕하세요
2025-01-01,09:01,사용자2,안녕히 주무세요
```

### 5.2 출력 파일 형식 (Markdown)
```markdown
09:00 사용자1: 안녕하세요
09:01 사용자2: 안녕히 주무세요
```

### 5.3 API 응답 형식
```typescript
interface ProcessedFile {
  name: string;
  content: string;
  size: number;
}

interface UploadResponse {
  message: string;
  files: ProcessedFile[];
  totalMessages: number;
  dateRange: string;
  isTemporary: boolean;
}
```

## 6. 환경별 동작

### 6.1 로컬 개발 환경
- 사용자 지정 경로에 실제 파일 생성
- 파일 시스템 기반 관리
- 개발자 도구를 통한 디버깅 가능

### 6.2 Vercel 프로덕션 환경
- `/tmp` 디렉터리 사용 (서버리스 제약)
- 메모리 기반 파일 처리
- 클라이언트 사이드 다운로드

## 7. 에러 처리

### 7.1 파일 업로드 에러
- 지원되지 않는 파일 형식
- 파일 크기 초과
- 네트워크 연결 문제

### 7.2 파일 처리 에러
- 잘못된 CSV 형식
- 날짜 형식 인식 불가
- 빈 파일 또는 데이터 없음

### 7.3 시스템 에러
- 서버 용량 부족
- 타임아웃
- 브라우저 호환성 문제

## 8. 성능 요구사항

### 8.1 파일 처리 성능
- 최대 파일 크기: 10MB
- 최대 메시지 수: 100,000개
- 처리 시간: 30초 이내

### 8.2 사용자 경험
- 페이지 로딩 시간: 3초 이내
- 파일 업로드 응답: 1초 이내
- ZIP 생성 시간: 10초 이내

## 9. 보안 및 프라이버시

### 9.1 데이터 보안
- 업로드된 파일은 처리 후 즉시 삭제
- 클라이언트 사이드 처리로 서버에 민감 정보 저장 없음
- HTTPS 연결 강제

### 9.2 프라이버시
- 사용자 데이터 수집 없음
- 쿠키 사용 최소화 (설정 저장용 로컬스토리지만 사용)
- 개인정보 처리방침 명시

## 10. 확장 계획

### 10.1 단기 개선사항
- 다양한 카카오톡 CSV 형식 지원
- 더 많은 출력 형식 지원 (JSON, TXT 등)
- 파일 미리보기 기능

### 10.2 장기 개선사항
- 다른 메신저 지원 (텔레그램, 디스코드 등)
- 대화 분석 기능 (통계, 워드클라우드 등)
- 모바일 앱 개발

## 11. 성공 지표

### 11.1 기술적 지표
- 업타임: 99.9% 이상
- 처리 성공률: 95% 이상
- 평균 응답 시간: 5초 이내

### 11.2 사용자 지표
- 월간 활성 사용자 수
- 파일 처리 성공률
- 사용자 만족도 (피드백 기반)
